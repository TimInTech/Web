<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TimInTech - GitHub Portfolio | Entwickler & Tech-Enthusiast</title>
    <meta name="description" content="Portfolio von TimInTech - Entdecke innovative Projekte wie Reiseplaner, GPX-PWA, Brief-Dashboard und mehr. Moderne Webanwendungen und Tools.">
    <meta property="og:title" content="TimInTech - GitHub Portfolio">
    <meta property="og:description" content="Portfolio von TimInTech - Innovative Projekte und moderne Webanwendungen">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://timintech.github.io">
    <meta name="twitter:card" content="summary_large_image">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' data: https://raw.githubusercontent.com https://opengraph.githubassets.com; connect-src https://api.github.com https://raw.githubusercontent.com; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline';">
    <link rel="preconnect" href="https://api.github.com">
    <link rel="preconnect" href="https://raw.githubusercontent.com">
    <link rel="preconnect" href="https://opengraph.githubassets.com">
    <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', 'Monaco', monospace;
            font-size: clamp(0.9rem, 1.4vw, 1rem);
            background: #0a0a0a;
            background-image:
                radial-gradient(circle at 25% 25%, rgba(0, 255, 136, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(58, 134, 255, 0.03) 0%, transparent 50%);
            min-height: 100vh;
            color: #e6e6e6;
            line-height: 1.6;
        }

        * {
            box-sizing: border-box;
        }

        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: #00ff88;
            color: #0a0a0a;
            padding: 8px;
            text-decoration: none;
            z-index: 1000;
            border-radius: 4px;
            font-weight: 600;
            min-height: 40px;
            min-width: 40px;
            display: flex;
            align-items: center;
        }

        .skip-link:focus {
            top: 6px;
        }

        .terminal-header {
            background: linear-gradient(135deg, #0a0a0a, #1a1a1a);
            border-bottom: 2px solid #00ff88;
            padding: clamp(0.5rem, 2vw, 0.75rem) clamp(1rem, 3vw, 1.5rem);
            font-size: clamp(0.8rem, 1.2vw, 0.9rem);
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 15px rgba(0, 255, 136, 0.15);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .terminal-left {
            display: flex;
            align-items: center;
            gap: clamp(0.5rem, 2vw, 1rem);
        }

        .terminal-dots {
            display: flex;
            gap: 0.5rem;
        }

        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            box-shadow: 0 0 5px currentColor;
        }

        .dot.red { background: #ff5f56; color: #ff5f56; }
        .dot.yellow { background: #ffbd2e; color: #ffbd2e; }
        .dot.green { background: #27ca3f; color: #27ca3f; }

        .terminal-text {
            color: #00ff88;
            font-weight: 600;
            text-shadow: 0 0 8px rgba(0, 255, 136, 0.3);
        }

        .cursor {
            display: inline-block;
            width: 8px;
            height: 16px;
            background: #00ff88;
            animation: blink 1s infinite;
            margin-left: 4px;
            box-shadow: 0 0 3px #00ff88;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        @media (prefers-reduced-motion: reduce) {
            .cursor {
                animation: none;
            }
        }

        .rate-limit-status {
            font-size: clamp(0.7rem, 1vw, 0.8rem);
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            border: 1px solid;
            cursor: help;
            font-weight: 600;
            text-shadow: 0 0 3px currentColor;
            transition: all 0.3s ease;
            min-height: 40px;
            min-width: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .rate-limit-ok {
            color: #00ff88;
            border-color: #00ff88;
            background: rgba(0, 255, 136, 0.1);
            box-shadow: 0 0 8px rgba(0, 255, 136, 0.1);
        }

        .rate-limit-warn {
            color: #ffbd2e;
            border-color: #ffbd2e;
            background: rgba(255, 189, 46, 0.1);
            box-shadow: 0 0 8px rgba(255, 189, 46, 0.1);
        }

        .rate-limit-limit {
            color: #ff5f56;
            border-color: #ff5f56;
            background: rgba(255, 95, 86, 0.1);
            box-shadow: 0 0 8px rgba(255, 95, 86, 0.1);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: clamp(1rem, 3vw, 2rem);
        }

        .hero {
            text-align: center;
            margin-bottom: clamp(2rem, 5vw, 3rem);
            background: rgba(10, 10, 10, 0.9);
            backdrop-filter: blur(15px);
            border-radius: clamp(15px, 3vw, 20px);
            padding: clamp(1rem, 3vw, 2rem);
            border: 1px solid rgba(0, 255, 136, 0.3);
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.1);
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, #00ff88, transparent);
            animation: scan 3s infinite;
        }

        @keyframes scan {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        @media (prefers-reduced-motion: reduce) {
            .hero::before {
                animation: none;
            }
        }

        .avatar {
            width: clamp(80px, 15vw, 100px);
            height: clamp(80px, 15vw, 100px);
            border-radius: 50%;
            background: linear-gradient(45deg, #00ff88, #3a86ff);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            font-size: clamp(2rem, 4vw, 2.5rem);
            color: #0a0a0a;
            font-weight: bold;
            box-shadow: 0 0 25px rgba(0, 255, 136, 0.3);
            border: 1px solid rgba(0, 255, 136, 0.5);
        }

        .hero h1 {
            font-size: clamp(2rem, 5vw, 2.5rem);
            margin-bottom: 0.5rem;
            background: linear-gradient(45deg, #00ff88, #3a86ff, #ff0088);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 15px rgba(0, 255, 136, 0.2);
        }

        .hero p {
            color: #b0b0b0;
            font-size: clamp(1rem, 2vw, 1.1rem);
            margin-bottom: 1.5rem;
        }

        .skills {
            display: flex;
            justify-content: center;
            gap: clamp(0.5rem, 1.5vw, 0.75rem);
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .skill-badge {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid rgba(0, 255, 136, 0.5);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: clamp(0.7rem, 1.2vw, 0.8rem);
            color: #00ff88;
            box-shadow: 0 0 8px rgba(0, 255, 136, 0.1);
            text-shadow: 0 0 3px rgba(0, 255, 136, 0.3);
        }

        .github-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: linear-gradient(45deg, #00ff88, #3a86ff);
            color: #0a0a0a;
            text-decoration: none;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.2);
            min-height: 40px;
            min-width: 40px;
        }

        .github-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 255, 136, 0.3);
        }

        .github-btn:focus {
            outline: 2px solid #00ff88;
            outline-offset: 2px;
        }

        .widgets {
            display: grid;
            grid-template-columns: 1fr;
            gap: clamp(1rem, 2vw, 1.5rem);
            margin-bottom: clamp(1.5rem, 3vw, 2rem);
        }

        @media (min-width: 640px) {
            .widgets {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 1024px) {
            .widgets {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
        }

        .widget {
            background: rgba(10, 10, 10, 0.9);
            padding: clamp(1rem, 2vw, 1.5rem);
            border-radius: 15px;
            border: 1px solid rgba(0, 255, 136, 0.3);
            text-align: center;
            position: relative;
            backdrop-filter: blur(10px);
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.1);
        }

        .widget-number {
            font-size: clamp(1.5rem, 3vw, 2rem);
            font-weight: bold;
            color: #00ff88;
            margin-bottom: 0.5rem;
            text-shadow: 0 0 8px rgba(0, 255, 136, 0.3);
        }

        .widget-label {
            font-size: clamp(0.8rem, 1.2vw, 0.9rem);
            color: #888;
        }

        .widget-note {
            font-size: clamp(0.6rem, 1vw, 0.7rem);
            color: #666;
            margin-top: 0.25rem;
            font-style: italic;
        }

        .donut-chart {
            width: clamp(50px, 10vw, 60px);
            height: clamp(50px, 10vw, 60px);
            margin: 0 auto 0.5rem;
            filter: drop-shadow(0 0 3px rgba(0, 255, 136, 0.2));
        }

        .controls {
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: 15px;
            padding: clamp(1rem, 2vw, 1.5rem);
            margin-bottom: clamp(1.5rem, 3vw, 2rem);
            position: sticky;
            top: 80px;
            z-index: 50;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.1);
        }

        .controls-row {
            display: flex;
            gap: clamp(0.5rem, 2vw, 1rem);
            margin-bottom: 1rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .search-box {
            flex: 1;
            min-width: 200px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            background: rgba(10, 10, 10, 0.8);
            border: 1px solid rgba(0, 255, 136, 0.5);
            border-radius: 25px;
            color: #e6e6e6;
            font-family: inherit;
            font-size: clamp(0.8rem, 1.2vw, 0.9rem);
            box-shadow: inset 0 0 8px rgba(0, 255, 136, 0.05);
            min-height: 40px;
        }

        .search-input:focus {
            outline: 2px solid #00ff88;
            outline-offset: 2px;
            box-shadow: 0 0 12px rgba(0, 255, 136, 0.2);
        }

        .search-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: #00ff88;
        }

        .view-toggle {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .view-btn {
            padding: 0.5rem 1rem;
            background: rgba(10, 10, 10, 0.8);
            border: 1px solid rgba(0, 255, 136, 0.5);
            border-radius: 15px;
            color: #00ff88;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
            font-size: clamp(0.7rem, 1vw, 0.8rem);
            min-height: 40px;
            min-width: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .view-btn:focus {
            outline: 2px solid #00ff88;
            outline-offset: 2px;
        }

        .view-btn.active {
            background: rgba(0, 255, 136, 0.2);
            box-shadow: 0 0 8px rgba(0, 255, 136, 0.2);
        }

        .filters {
            display: flex;
            gap: clamp(0.25rem, 1vw, 0.5rem);
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 0.5rem 1rem;
            background: rgba(10, 10, 10, 0.8);
            border: 1px solid rgba(0, 255, 136, 0.5);
            border-radius: 20px;
            color: #00ff88;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
            font-size: clamp(0.7rem, 1vw, 0.8rem);
            position: relative;
            box-shadow: 0 0 5px rgba(0, 255, 136, 0.05);
            min-height: 40px;
            min-width: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .filter-btn:focus {
            outline: 2px solid #00ff88;
            outline-offset: 2px;
        }

        .filter-btn.active {
            background: rgba(0, 255, 136, 0.2);
            box-shadow: 0 0 12px rgba(0, 255, 136, 0.2);
            text-shadow: 0 0 3px rgba(0, 255, 136, 0.3);
        }

        .filter-btn .count {
            background: rgba(0, 255, 136, 0.3);
            color: #00ff88;
            padding: 0.1rem 0.4rem;
            border-radius: 10px;
            font-size: clamp(0.6rem, 0.9vw, 0.7rem);
            margin-left: 0.3rem;
            box-shadow: 0 0 3px rgba(0, 255, 136, 0.1);
        }

        .sort-controls {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .sort-select {
            background: rgba(10, 10, 10, 0.8);
            border: 1px solid rgba(0, 255, 136, 0.5);
            border-radius: 15px;
            color: #00ff88;
            padding: 0.5rem;
            font-family: inherit;
            font-size: clamp(0.7rem, 1vw, 0.8rem);
            box-shadow: 0 0 8px rgba(0, 255, 136, 0.05);
            min-height: 40px;
        }

        .sort-select:focus {
            outline: 2px solid #00ff88;
            outline-offset: 2px;
            box-shadow: 0 0 12px rgba(0, 255, 136, 0.2);
        }

        .results-count {
            color: #888;
            font-size: clamp(0.8rem, 1.1vw, 0.9rem);
        }

        .featured-section {
            margin-bottom: clamp(2rem, 4vw, 3rem);
        }

        .section-title {
            font-size: clamp(1.5rem, 3vw, 1.8rem);
            margin-bottom: clamp(1rem, 2vw, 1.5rem);
            color: #00ff88;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-shadow: 0 0 8px rgba(0, 255, 136, 0.3);
        }

        .featured-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: clamp(1rem, 2vw, 2rem);
            margin-bottom: clamp(1.5rem, 3vw, 2rem);
        }

        @media (min-width: 640px) {
            .featured-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 1024px) {
            .featured-grid {
                grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            }
        }

        .repos-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: clamp(1rem, 2vw, 1.5rem);
            margin-bottom: clamp(1.5rem, 3vw, 2rem);
        }

        @media (min-width: 640px) {
            .repos-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 1024px) {
            .repos-grid {
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            }
        }

        .repos-grid.compact {
            gap: clamp(0.75rem, 1.5vw, 1rem);
        }

        @media (min-width: 1024px) {
            .repos-grid.compact {
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            }
        }

        .repo-card {
            background: rgba(10, 10, 10, 0.9);
            backdrop-filter: blur(15px);
            border-radius: 16px;
            border: 1px solid rgba(0, 255, 136, 0.2);
            overflow: hidden;
            transition: all 0.3s ease;
            position: relative;
            display: flex;
            flex-direction: column;
            height: 100%;
            box-shadow: 0 0 12px rgba(0, 255, 136, 0.05);
        }

        .repo-card.featured {
            border-color: rgba(255, 0, 136, 0.3);
            box-shadow: 0 0 20px rgba(255, 0, 136, 0.1);
        }

        .repo-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(0, 255, 136, 0.15);
            border-color: rgba(0, 255, 136, 0.4);
        }

        .repo-card.featured:hover {
            box-shadow: 0 15px 30px rgba(255, 0, 136, 0.2);
        }

        .repo-card:focus-within {
            border-color: #00ff88;
            box-shadow: 0 0 0 2px rgba(0, 255, 136, 0.2);
        }

        .repo-card.compact {
            min-height: 160px;
        }

        .repo-card.compact .repo-content {
            padding: 0.75rem;
        }

        .repo-card.compact .repo-description {
            -webkit-line-clamp: 2;
        }

        .repo-preview {
            width: 100%;
            height: clamp(120px, 20vw, 200px);
            overflow: hidden;
            position: relative;
            background: #0a0a0a;
            aspect-ratio: 16/9;
        }

        .repo-card.featured .repo-preview {
            height: clamp(140px, 25vw, 250px);
        }

        .repo-card.compact .repo-preview {
            height: clamp(100px, 15vw, 140px);
        }

        .repo-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease, opacity 0.3s ease;
            opacity: 0;
        }

        .repo-preview img.loaded {
            opacity: 1;
        }

        .repo-card:hover .repo-preview img {
            transform: scale(1.03);
        }

        @media (prefers-reduced-motion: reduce) {
            .repo-card:hover .repo-preview img {
                transform: none;
            }
        }

        .repo-content {
            padding: clamp(1rem, 2vw, 1.5rem);
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .repo-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .repo-name {
            font-size: clamp(1rem, 2vw, 1.2rem);
            font-weight: 600;
            color: #e6e6e6;
            text-decoration: none;
            flex: 1;
            text-shadow: 0 0 3px rgba(230, 230, 230, 0.2);
        }

        .repo-name:hover {
            color: #00ff88;
            text-shadow: 0 0 8px rgba(0, 255, 136, 0.3);
        }

        .repo-name:focus {
            outline: 2px solid #00ff88;
            outline-offset: 2px;
            border-radius: 4px;
        }

        .repo-badges {
            display: flex;
            gap: 0.5rem;
        }

        .repo-badge {
            background: rgba(255, 189, 46, 0.1);
            border: 1px solid #ffbd2e;
            color: #ffbd2e;
            padding: 0.1rem 0.4rem;
            border-radius: 8px;
            font-size: clamp(0.5rem, 0.8vw, 0.6rem);
            text-transform: uppercase;
            box-shadow: 0 0 3px rgba(255, 189, 46, 0.1);
        }

        .repo-badge.featured {
            background: rgba(255, 0, 136, 0.1);
            border-color: #ff0088;
            color: #ff0088;
            box-shadow: 0 0 3px rgba(255, 0, 136, 0.1);
        }

        .repo-description {
            color: #b0b0b0;
            margin-bottom: 1rem;
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            flex: 1;
            font-size: clamp(0.8rem, 1.1vw, 0.9rem);
        }

        .repo-topics {
            display: flex;
            gap: clamp(0.25rem, 0.8vw, 0.5rem);
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .topic-tag {
            background: rgba(58, 134, 255, 0.1);
            border: 1px solid rgba(58, 134, 255, 0.5);
            padding: 0.2rem 0.6rem;
            border-radius: 12px;
            font-size: clamp(0.6rem, 0.9vw, 0.7rem);
            color: #3a86ff;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
            box-shadow: 0 0 3px rgba(58, 134, 255, 0.05);
            min-height: 40px;
            min-width: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .topic-tag:hover, .topic-tag:focus {
            background: rgba(58, 134, 255, 0.2);
            outline: 2px solid #3a86ff;
            outline-offset: 2px;
            box-shadow: 0 0 8px rgba(58, 134, 255, 0.2);
        }

        .repo-stats {
            display: flex;
            gap: clamp(0.5rem, 1.5vw, 1rem);
            font-size: clamp(0.75rem, 1vw, 0.85rem);
            color: #888;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .stat {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .repo-links {
            display: flex;
            gap: clamp(0.5rem, 1.2vw, 0.75rem);
            flex-wrap: wrap;
            margin-top: auto;
        }

        .repo-link {
            display: flex;
            align-items: center;
            gap: 0.3rem;
            padding: 0.4rem 0.8rem;
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid rgba(0, 255, 136, 0.5);
            border-radius: 15px;
            color: #00ff88;
            text-decoration: none;
            font-size: clamp(0.7rem, 1vw, 0.8rem);
            transition: all 0.3s ease;
            cursor: pointer;
            font-family: inherit;
            box-shadow: 0 0 3px rgba(0, 255, 136, 0.05);
            min-height: 40px;
            min-width: 40px;
            justify-content: center;
        }

        .repo-link:hover, .repo-link:focus {
            background: rgba(0, 255, 136, 0.2);
            transform: translateY(-1px);
            outline: 2px solid #00ff88;
            outline-offset: 2px;
            box-shadow: 0 0 12px rgba(0, 255, 136, 0.2);
        }

        .language-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #00ff88;
            box-shadow: 0 0 3px currentColor;
        }

        .skeleton {
            background: linear-gradient(90deg, #0a0a0a 25%, #1a1a1a 50%, #0a0a0a 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border: 1px solid rgba(0, 255, 136, 0.1);
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        @media (prefers-reduced-motion: reduce) {
            .skeleton {
                animation: none;
            }
        }

        .skeleton-card {
            height: clamp(300px, 40vw, 400px);
            border-radius: 16px;
        }

        .loading, .error {
            text-align: center;
            padding: clamp(1.5rem, 3vw, 2rem);
            border-radius: 10px;
            margin: 1rem 0;
        }

        .loading {
            color: #00ff88;
            text-shadow: 0 0 8px rgba(0, 255, 136, 0.3);
        }

        .error {
            color: #ff6b6b;
            background: rgba(10, 10, 10, 0.9);
            border: 1px solid #ff6b6b;
            box-shadow: 0 0 12px rgba(255, 107, 107, 0.1);
        }

        .banner {
            padding: clamp(0.75rem, 2vw, 1rem);
            margin-bottom: 1rem;
            border-radius: 10px;
            border: 1px solid;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            backdrop-filter: blur(10px);
            font-size: clamp(0.8rem, 1.1vw, 0.9rem);
        }

        .banner.warning {
            background: rgba(255, 189, 46, 0.1);
            border-color: #ffbd2e;
            color: #ffbd2e;
            box-shadow: 0 0 12px rgba(255, 189, 46, 0.1);
        }

        .banner.error {
            background: rgba(255, 95, 86, 0.1);
            border-color: #ff5f56;
            color: #ff5f56;
            box-shadow: 0 0 12px rgba(255, 95, 86, 0.1);
        }

        .retry-btn {
            background: none;
            border: 1px solid currentColor;
            color: inherit;
            padding: 0.25rem 0.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-family: inherit;
            font-size: clamp(0.7rem, 1vw, 0.8rem);
            transition: all 0.3s ease;
            min-height: 40px;
            min-width: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .retry-btn:focus, .retry-btn:hover {
            outline: 2px solid currentColor;
            outline-offset: 2px;
            box-shadow: 0 0 8px currentColor;
        }

        .hidden {
            display: none !important;
        }

        footer {
            text-align: center;
            padding: clamp(1.5rem, 3vw, 2rem);
            margin-top: clamp(2rem, 4vw, 3rem);
            border-top: 1px solid rgba(0, 255, 136, 0.2);
            color: #666;
            font-size: clamp(0.8rem, 1.1vw, 0.9rem);
        }

        footer a {
            color: #00ff88;
            text-decoration: none;
            text-shadow: 0 0 3px rgba(0, 255, 136, 0.2);
        }

        footer a:hover, footer a:focus {
            text-decoration: underline;
            outline: 2px solid #00ff88;
            outline-offset: 2px;
            text-shadow: 0 0 8px rgba(0, 255, 136, 0.3);
        }

        @media (max-width: 640px) {
            .terminal-header {
                flex-direction: column;
                gap: 0.5rem;
            }

            .controls {
                position: static;
            }

            .controls-row {
                flex-direction: column;
                align-items: stretch;
            }

            .search-box {
                min-width: auto;
            }

            .view-toggle, .sort-controls {
                justify-content: center;
            }
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "TimInTech Portfolio",
        "url": "https://timintech.github.io",
        "author": {
            "@type": "Person",
            "name": "TimInTech",
            "url": "https://github.com/TimInTech"
        }
    }
    </script>
</head>
<body>
    <a href="#main" class="skip-link">Zum Hauptinhalt springen</a>

    <header class="terminal-header">
        <div class="terminal-left">
            <div class="terminal-dots">
                <div class="dot red"></div>
                <div class="dot yellow"></div>
                <div class="dot green"></div>
            </div>
            <div class="terminal-text">
                >_ TimInTech // Repositories<span class="cursor"></span>
            </div>
        </div>
        <div class="rate-limit-status" id="rate-limit-status" title="GitHub API Rate Limit Status">API OK</div>
    </header>

    <main id="main" class="container">
        <div id="banners" aria-live="polite"></div>

        <section class="hero">
            <div class="avatar" aria-label="TimInTech Avatar">TT</div>
            <h1>TimInTech</h1>
            <p>Entwickler & Tech-Enthusiast</p>
            <div class="skills">
                <span class="skill-badge">HTML5</span>
                <span class="skill-badge">CSS3</span>
                <span class="skill-badge">JavaScript</span>
                <span class="skill-badge">Python</span>
                <span class="skill-badge">Vue.js</span>
            </div>
            <a href="https://github.com/TimInTech" target="_blank" rel="noopener noreferrer" class="github-btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                    <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                </svg>
                GitHub Profil
            </a>
        </section>

        <section class="widgets" id="widgets" aria-label="Repository Statistiken" aria-busy="true">
            <!-- Widgets werden hier eingefügt -->
        </section>

        <nav class="controls" aria-label="Repository Filter und Suche">
            <div class="controls-row">
                <div class="search-box">
                    <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                    <input type="text" class="search-input" placeholder="Repositories durchsuchen..." id="search-input" aria-label="Repository Suche">
                </div>
                <div class="view-toggle">
                    <span style="color: #888; font-size: clamp(0.7rem, 1vw, 0.8rem);">Ansicht:</span>
                    <button class="view-btn active" data-view="comfort">Komfort</button>
                    <button class="view-btn" data-view="compact">Kompakt</button>
                </div>
                <div class="sort-controls">
                    <label for="sort-select" class="sr-only">Sortierung</label>
                    <select class="sort-select" id="sort-select" aria-label="Sortierung auswählen">
                        <option value="updated">Zuletzt aktualisiert</option>
                        <option value="stars">Stars ↓</option>
                        <option value="name">Name A-Z</option>
                    </select>
                </div>
                <div class="results-count" id="results-count" aria-live="polite"></div>
            </div>
            <div class="filters" id="filters" role="group" aria-label="Filter">
                <!-- Filter werden hier eingefügt -->
            </div>
        </nav>

        <section class="featured-section" id="featured-section" aria-label="Wichtige Projekte">
            <h2 class="section-title">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                    <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"></polygon>
                </svg>
                Wichtige Projekte
            </h2>
            <div class="featured-grid" id="featured-grid">
                <!-- Featured Repos werden hier eingefügt -->
            </div>
        </section>

        <section id="repos-section" aria-label="Alle Repositories">
            <h2 class="section-title">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                    <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                    <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                </svg>
                Alle Repositories
            </h2>
            <div class="repos-grid" id="repos-grid" aria-busy="true">
                <!-- Skeleton Loader -->
                <div class="skeleton skeleton-card"></div>
                <div class="skeleton skeleton-card"></div>
                <div class="skeleton skeleton-card"></div>
                <div class="skeleton skeleton-card"></div>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 TimInTech | <a href="https://github.com/TimInTech" target="_blank" rel="noopener noreferrer">GitHub</a></p>
    </footer>

    <script defer>
        // Globale Variablen
        const username = 'TimInTech';
        const excludedRepos = ['Whitelist'];
        const featuredRepos = ['reiseplaner', 'gpx-pwa', 'Brief-Dashboard', 'bike-routing-app', 'proxmox-manager'];

        const languageColors = {
            'JavaScript': '#f1e05a', 'TypeScript': '#2b7489', 'Python': '#3572A5',
            'Java': '#b07219', 'C++': '#f34b7d', 'C#': '#239120', 'PHP': '#4F5D95',
            'Ruby': '#701516', 'Go': '#00ADD8', 'Rust': '#dea584', 'Swift': '#ffac45',
            'Kotlin': '#F18E33', 'HTML': '#e34c26', 'CSS': '#1572B6', 'Vue': '#4FC08D',
            'React': '#61DAFB', 'Shell': '#89e051', 'Dockerfile': '#384d54'
        };

        let allRepos = [];
        let filteredRepos = [];
        let currentFilters = { search: '', filter: 'all', sort: 'updated' };
        let rateLimitInfo = { remaining: 60, limit: 60 };
        let lowBudgetMode = false;
        let searchTimeout;
        let activeBanners = new Set();
        let headRequestQueue = [];
        let activeHeadRequests = 0;
        const maxConcurrentHeadRequests = 4;

        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./service-worker.js')
                .catch(err => console.log('SW registration failed'));
        }

        // Cache Management
        const cache = {
            get: (key) => {
                try {
                    const item = localStorage.getItem(`gh_cache_${key}`);
                    if (!item) return null;
                    const { data, timestamp, etag } = JSON.parse(item);
                    if (Date.now() - timestamp > 3600000) { // 1 Stunde
                        localStorage.removeItem(`gh_cache_${key}`);
                        return null;
                    }
                    return { data, etag };
                } catch (e) {
                    return null;
                }
            },
            set: (key, data, etag = null) => {
                try {
                    localStorage.setItem(`gh_cache_${key}`, JSON.stringify({
                        data,
                        etag,
                        timestamp: Date.now()
                    }));
                } catch (e) {
                    // Storage voll - älteste Einträge löschen
                    const keys = Object.keys(localStorage).filter(k => k.startsWith('gh_cache_'));
                    keys.slice(0, Math.floor(keys.length / 2)).forEach(k => localStorage.removeItem(k));
                }
            }
        };

        // Intersection Observer für Lazy Loading
        const imageObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    img.src = img.dataset.src;
                    img.onload = () => img.classList.add('loaded');
                    img.onerror = () => img.parentElement.style.display = 'none';
                    imageObserver.unobserve(img);
                }
            });
        });

        // Rate Limit Preflight
        async function rateLimitPreflight() {
            const token = new URLSearchParams(window.location.search).get('token');
            const headers = {
                'Accept': 'application/vnd.github.v3+json',
                'User-Agent': 'TimInTech-Portfolio'
            };

            if (token) headers['Authorization'] = `token ${token}`;

            try {
                const response = await fetch('https://api.github.com/rate_limit', { headers });
                const data = await response.json();

                rateLimitInfo = {
                    remaining: data.rate.remaining,
                    limit: data.rate.limit
                };

                const budget = rateLimitInfo.remaining - 5;
                lowBudgetMode = budget < 20;

                if (lowBudgetMode) {
                    showBanner('Low-Budget-Modus aktiviert: Reduzierte API-Calls für bessere Performance', 'warning');
                }

                updateRateLimitStatus();
                return budget;
            } catch (error) {
                console.warn('Rate limit preflight failed:', error);
                return 50; // Fallback
            }
        }

        // API Helper mit verbessertem Rate Limit Handling
        async function fetchWithCache(url, cacheKey) {
            const token = new URLSearchParams(window.location.search).get('token');
            const cached = cache.get(cacheKey);

            const headers = {
                'Accept': 'application/vnd.github.v3+json',
                'User-Agent': 'TimInTech-Portfolio'
            };

            if (token) headers['Authorization'] = `token ${token}`;
            if (cached?.etag) headers['If-None-Match'] = cached.etag;

            try {
                const response = await fetch(url, { headers });

                // Rate Limit Info aktualisieren
                rateLimitInfo = {
                    remaining: parseInt(response.headers.get('X-RateLimit-Remaining') || '60'),
                    limit: parseInt(response.headers.get('X-RateLimit-Limit') || '60')
                };
                updateRateLimitStatus();

                if (response.status === 304 && cached) {
                    return cached.data;
                }

                if (!response.ok) {
                    if (response.status === 403) {
                        showBanner('Rate Limit erreicht. Füge ?token=YOUR_TOKEN zur URL hinzu.', 'error');
                    }
                    throw new Error(`HTTP ${response.status}`);
                }

                const data = await response.json();
                const etag = response.headers.get('ETag');
                cache.set(cacheKey, data, etag);
                return data;
            } catch (error) {
                if (cached) return cached.data;
                throw error;
            }
        }

        // HEAD Request Queue für Concurrency Control (nur für raw.githubusercontent.com)
        async function queuedHeadRequest(url) {
            return new Promise((resolve) => {
                headRequestQueue.push({ url, resolve });
                processHeadQueue();
            });
        }

        async function processHeadQueue() {
            if (activeHeadRequests >= maxConcurrentHeadRequests || headRequestQueue.length === 0) {
                return;
            }

            const { url, resolve } = headRequestQueue.shift();
            activeHeadRequests++;

            try {
                const response = await fetch(url, { method: 'HEAD' });
                resolve(response.ok);
            } catch (e) {
                resolve(false);
            } finally {
                activeHeadRequests--;
                processHeadQueue();
            }
        }

        // Rate Limit Status mit remaining/limit Anzeige
        function updateRateLimitStatus() {
            const status = document.getElementById('rate-limit-status');
            const percentage = (rateLimitInfo.remaining / rateLimitInfo.limit) * 100;

            status.className = 'rate-limit-status ';
            status.textContent = `${rateLimitInfo.remaining}/${rateLimitInfo.limit}`;

            if (percentage > 50) {
                status.className += 'rate-limit-ok';
                status.title = `${rateLimitInfo.remaining} von ${rateLimitInfo.limit} Requests verfügbar`;
            } else if (percentage > 10) {
                status.className += 'rate-limit-warn';
                status.title = `Rate Limit wird knapp - Token empfohlen (${rateLimitInfo.remaining} verbleibend)`;
            } else {
                status.className += 'rate-limit-limit';
                status.title = `Rate Limit fast erreicht - Token erforderlich (${rateLimitInfo.remaining} verbleibend)`;
            }
        }

        // Banner System mit Deduplizierung
        function showBanner(message, type = 'warning') {
            const bannerKey = `${type}:${message}`;
            if (activeBanners.has(bannerKey)) return;

            activeBanners.add(bannerKey);
            const banners = document.getElementById('banners');
            const banner = document.createElement('div');
            banner.className = `banner ${type}`;
            banner.innerHTML = `
                <span>${message}</span>
                ${type === 'error' ? '<button class="retry-btn" onclick="fetchRepositories()">Retry</button>' : ''}
                <button class="retry-btn" onclick="this.parentElement.remove(); activeBanners.delete('${bannerKey}')">×</button>
            `;
            banners.appendChild(banner);
        }

        // Preview Image Finder - nur raw.githubusercontent.com HEAD requests
        async function findPreviewImage(repo) {
            const patterns = [
                'screenshot.png', 'screenshot.jpg', 'screenshot.webp', 'screenshot.svg',
                'preview.png', 'preview.jpg', 'preview.webp', 'preview.svg',
                'banner.png', 'banner.jpg', 'banner.webp', 'banner.svg',
                'docs/screenshot.png', 'docs/screenshot.jpg', 'docs/banner.png', 'docs/banner.jpg',
                'assets/preview.png', 'assets/preview.jpg', 'assets/banner.png', 'assets/banner.jpg'
            ];

            // 1. README Bilder suchen (nur wenn Budget reicht)
            if (!lowBudgetMode) {
                try {
                    const readme = await fetchWithCache(
                        `https://api.github.com/repos/${username}/${repo.name}/readme`,
                        `readme_${repo.name}`
                    );
                    const content = atob(readme.content);

                    // Markdown Inline: ![alt](url)
                    let imageMatch = content.match(/!\[.*?\]\((.*?\.(?:png|jpg|jpeg|webp|svg))\)/i);

                    // Markdown Reference: ![alt][ref] ... [ref]: url
                    if (!imageMatch) {
                        const refMatch = content.match(/!\[.*?\]\[([^\]]+)\]/);
                        if (refMatch) {
                            const refPattern = new RegExp(`\\[${refMatch[1]}\\]:\\s*(.*?\\.(?:png|jpg|jpeg|webp|svg))`, 'i');
                            imageMatch = content.match(refPattern);
                        }
                    }

                    // HTML <img> Tag
                    if (!imageMatch) {
                        imageMatch = content.match(/<img[^>]+src=["']([^"']*\.(?:png|jpg|jpeg|webp|svg))[^"']*["'][^>]*>/i);
                    }

                    if (imageMatch) {
                        let imageUrl = imageMatch[1];
                        // Relative Pfade auflösen
                        if (imageUrl.startsWith('./') || imageUrl.startsWith('../') || (!imageUrl.startsWith('http') && !imageUrl.startsWith('//'))) {
                            imageUrl = imageUrl.replace(/^\.\.?\//g, '');
                            imageUrl = `https://raw.githubusercontent.com/${username}/${repo.name}/${repo.default_branch}/${imageUrl}`;
                        }
                        return imageUrl;
                    }
                } catch (e) {
                    console.log(`README check failed for ${repo.name}:`, e.message);
                }
            }

            // 2. Dateimuster prüfen mit Queue (nur raw.githubusercontent.com)
            for (const pattern of patterns) {
                const url = `https://raw.githubusercontent.com/${username}/${repo.name}/${repo.default_branch}/${pattern}`;
                const exists = await queuedHeadRequest(url);
                if (exists) {
                    console.log(`Found preview for ${repo.name}: ${pattern}`);
                    return url;
                }
            }

            // 3. Fallback zu OpenGraph
            return `https://opengraph.githubassets.com/1/${username}/${repo.name}`;
        }

        // Repository Language Details mit Budget-Awareness
        async function fetchLanguageDetails(repo) {
            if (lowBudgetMode) {
                // Approximation aus repo.language
                return repo.language ? { [repo.language]: 1000 } : {};
            }

            try {
                const languages = await fetchWithCache(repo.languages_url, `languages_${repo.name}`);
                return languages;
            } catch (e) {
                return {};
            }
        }

        // Repository Fetching
        async function fetchUserRepos() {
            let allRepos = [];
            let page = 1;

            while (true) {
                const repos = await fetchWithCache(
                    `https://api.github.com/users/${username}/repos?sort=updated&per_page=100&page=${page}`,
                    `repos_page_${page}`
                );

                if (repos.length === 0) break;
                allRepos = allRepos.concat(repos);
                if (repos.length < 100) break;
                page++;
            }

            return allRepos.filter(repo => !excludedRepos.includes(repo.name));
        }

        async function augmentRepoDetails(repos) {
            return Promise.all(repos.map(async (repo) => {
                // Demo URL nur aus repo.homepage (kein HEAD auf GitHub Pages)
                let demoUrl = null;
                if (repo.homepage && repo.homepage.startsWith('http')) {
                    demoUrl = repo.homepage;
                }

                // Preview für alle Repos
                const previewUrl = await findPreviewImage(repo);

                // Language Details
                const languageDetails = await fetchLanguageDetails(repo);

                return {
                    ...repo,
                    isFeatured: featuredRepos.includes(repo.name),
                    demoUrl,
                    previewUrl,
                    languageDetails
                };
            }));
        }

        // Donut Chart für Sprachen
        function createDonutChart(languages, size = 60) {
            const canvas = document.createElement('canvas');
            canvas.width = size;
            canvas.height = size;
            const ctx = canvas.getContext('2d');

            const total = Object.values(languages).reduce((sum, bytes) => sum + bytes, 0);
            if (total === 0) return canvas;

            const sortedLangs = Object.entries(languages)
                .sort(([,a], [,b]) => b - a)
                .slice(0, 5);

            let currentAngle = -Math.PI / 2;
            const centerX = size / 2;
            const centerY = size / 2;
            const radius = size / 2 - 2;
            const innerRadius = radius * 0.6;

            sortedLangs.forEach(([lang, bytes]) => {
                const percentage = bytes / total;
                const sliceAngle = percentage * 2 * Math.PI;

                ctx.beginPath();
                ctx.arc(centerX, centerY, radius, currentAngle, currentAngle + sliceAngle);
                ctx.arc(centerX, centerY, innerRadius, currentAngle + sliceAngle, currentAngle, true);
                ctx.closePath();

                ctx.fillStyle = languageColors[lang] || '#666';
                ctx.fill();

                currentAngle += sliceAngle;
            });

            return canvas;
        }

        // Rendering
        function renderWidgets() {
            const totalStars = allRepos.reduce((sum, repo) => sum + repo.stargazers_count, 0);
            const formatter = new Intl.NumberFormat('de-DE');

            // Zuletzt aktiv berechnen
            const lastPushTimes = allRepos.map(repo => new Date(repo.pushed_at).getTime()).filter(time => !isNaN(time));
            const lastPush = lastPushTimes.length > 0 ? Math.max(...lastPushTimes) : null;

            let relativeTime = '—';
            let lastPushDate = '';

            if (lastPush) {
                const hoursAgo = Math.floor((Date.now() - lastPush) / (1000 * 60 * 60));
                const daysAgo = Math.floor(hoursAgo / 24);

                if (hoursAgo < 24) {
                    relativeTime = 'heute';
                } else if (hoursAgo < 48) {
                    relativeTime = 'gestern';
                } else {
                    relativeTime = `vor ${daysAgo} Tagen`;
                }

                lastPushDate = new Date(lastPush).toISOString();
            }

            // Sprachen aggregieren
            const allLanguages = {};
            allRepos.forEach(repo => {
                Object.entries(repo.languageDetails || {}).forEach(([lang, bytes]) => {
                    allLanguages[lang] = (allLanguages[lang] || 0) + bytes;
                });
            });

            // Topics aggregieren (case-insensitive)
            const topicsMap = {};
            allRepos.forEach(repo => {
                (repo.topics || []).forEach(topic => {
                    const lowerTopic = topic.toLowerCase();
                    if (!topicsMap[lowerTopic]) {
                        topicsMap[lowerTopic] = { name: topic, count: 0 };
                    }
                    topicsMap[lowerTopic].count++;
                });
            });

            const topTopics = Object.values(topicsMap)
                .sort((a, b) => b.count - a.count)
                .slice(0, 5);

            const donutChart = createDonutChart(allLanguages);

            document.getElementById('widgets').innerHTML = `
                <div class="widget">
                    <div class="widget-number">${formatter.format(allRepos.length)}</div>
                    <div class="widget-label">Repositories</div>
                </div>
                <div class="widget">
                    <div class="widget-number">${formatter.format(totalStars)}</div>
                    <div class="widget-label">Sterne gesamt</div>
                </div>
                <div class="widget" ${lastPushDate ? `title="${lastPushDate}"` : ''}>
                    <div class="widget-number">${relativeTime}</div>
                    <div class="widget-label">Zuletzt aktiv</div>
                </div>
                <div class="widget">
                    <div class="donut-chart">${donutChart.outerHTML}</div>
                    <div class="widget-label">Top Sprachen</div>
                    ${lowBudgetMode ? '<div class="widget-note">approx.</div>' : ''}
                </div>
                <div class="widget">
                    <div class="widget-number">${topTopics.slice(0, 2).map(t => t.name).join(', ')}</div>
                    <div class="widget-label">Top Topics</div>
                </div>
            `;

            document.getElementById('widgets').setAttribute('aria-busy', 'false');
        }

        function renderFilters() {
            // Topics aggregieren (case-insensitive)
            const topicsMap = {};
            allRepos.forEach(repo => {
                (repo.topics || []).forEach(topic => {
                    const lowerTopic = topic.toLowerCase();
                    if (!topicsMap[lowerTopic]) {
                        topicsMap[lowerTopic] = { name: topic, count: 0 };
                    }
                    topicsMap[lowerTopic].count++;
                });
            });

            const topTopics = Object.values(topicsMap)
                .sort((a, b) => b.count - a.count)
                .slice(0, 5);

            // Sprachen aggregieren
            const languagesMap = {};
            allRepos.forEach(repo => {
                if (repo.language) {
                    languagesMap[repo.language] = (languagesMap[repo.language] || 0) + 1;
                }
            });

            const topLanguages = Object.entries(languagesMap)
                .sort(([,a], [,b]) => b - a)
                .slice(0, 5);

            const filtersHtml = `
                <button class="filter-btn active" data-filter="all">Alle <span class="count">${allRepos.length}</span></button>
                <button class="filter-btn" data-filter="featured">Featured <span class="count">${allRepos.filter(r => r.isFeatured).length}</span></button>
                ${topTopics.map(topic =>
                    `<button class="filter-btn" data-filter="topic:${topic.name.toLowerCase()}">${topic.name} <span class="count">${topic.count}</span></button>`
                ).join('')}
                ${topLanguages.map(([lang, count]) =>
                    `<button class="filter-btn" data-filter="lang:${lang}">${lang} <span class="count">${count}</span></button>`
                ).join('')}
            `;

            document.getElementById('filters').innerHTML = filtersHtml;
        }

        function renderCards(repos, containerId = 'repos-grid', featured = false) {
            const grid = document.getElementById(containerId);

            if (repos.length === 0) {
                if (!featured) {
                    grid.innerHTML = '<div class="error">Keine Repositories gefunden.</div>';
                }
                return;
            }

            grid.innerHTML = repos.map(repo => {
                const languageColor = languageColors[repo.language] || '#666';
                const topicsHtml = (repo.topics || []).slice(0, 5).map(topic =>
                    `<button class="topic-tag" onclick="filterByTopic('${topic.toLowerCase()}')" aria-label="Filter nach ${topic}">${topic}</button>`
                ).join('');

                const previewHtml = repo.previewUrl ? `
                    <div class="repo-preview">
                        <img data-src="${repo.previewUrl}" alt="Preview ${repo.name}" loading="lazy">
                    </div>
                ` : '';

                const pushedDate = new Date(repo.pushed_at);
                const hoursAgo = Math.floor((Date.now() - pushedDate.getTime()) / (1000 * 60 * 60));
                const daysAgo = Math.floor(hoursAgo / 24);

                let relativeTime;
                if (hoursAgo < 24) {
                    relativeTime = 'heute';
                } else if (hoursAgo < 48) {
                    relativeTime = 'gestern';
                } else {
                    relativeTime = `vor ${daysAgo} Tagen`;
                }

                const badges = [];
                if (repo.isFeatured) badges.push('<span class="repo-badge featured">Featured</span>');
                if (repo.archived) badges.push('<span class="repo-badge">Archiviert</span>');
                if (repo.is_template) badges.push('<span class="repo-badge">Template</span>');

                return `
                    <article class="repo-card ${featured ? 'featured' : ''}" data-name="${repo.name.toLowerCase()}"
                             data-description="${(repo.description || '').toLowerCase()}"
                             data-topics="${(repo.topics || []).join(' ').toLowerCase()}"
                             data-featured="${repo.isFeatured}">
                        ${previewHtml}
                        <div class="repo-content">
                            <header class="repo-header">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                    <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                                    <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                                </svg>
                                <a href="${repo.html_url}" target="_blank" rel="noopener noreferrer" class="repo-name">
                                    ${repo.name}
                                </a>
                                <div class="repo-badges">${badges.join('')}</div>
                            </header>
                            <p class="repo-description">${repo.description || 'Keine Beschreibung verfügbar'}</p>
                            ${topicsHtml ? `<div class="repo-topics">${topicsHtml}</div>` : ''}
                            <div class="repo-stats">
                                ${repo.language ? `
                                    <div class="stat">
                                        <div class="language-dot" style="background-color: ${languageColor}"></div>
                                        ${repo.language}
                                    </div>
                                ` : ''}
                                <div class="stat" title="${repo.stargazers_count} Stars">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                        <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"></polygon>
                                    </svg>
                                    ${repo.stargazers_count}
                                </div>
                                <div class="stat" title="${repo.forks_count} Forks">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                        <path d="M6 3v12l4-2 4 2V3"></path>
                                    </svg>
                                    ${repo.forks_count}
                                </div>
                                <div class="stat" title="Zuletzt gepusht: ${pushedDate.toLocaleDateString('de-DE')}">
                                    ${relativeTime}
                                </div>
                                ${repo.license ? `
                                    <div class="stat" title="Lizenz: ${repo.license.name}">
                                        ${repo.license.spdx_id || repo.license.key}
                                    </div>
                                ` : ''}
                            </div>
                            <div class="repo-links">
                                <a href="${repo.html_url}" target="_blank" rel="noopener noreferrer" class="repo-link" aria-label="Code für ${repo.name} ansehen">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                        <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
                                    </svg>
                                    Code
                                </a>
                                ${repo.demoUrl ? `
                                    <a href="${repo.demoUrl}" target="_blank" rel="noopener noreferrer" class="repo-link" aria-label="Demo für ${repo.name} ansehen">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                                            <polyline points="15,3 21,3 21,9"></polyline>
                                            <line x1="10" y1="14" x2="21" y2="3"></line>
                                        </svg>
                                        Demo
                                    </a>
                                ` : ''}
                                <button class="repo-link" onclick="copyToClipboard(event, '${repo.html_url}')" aria-label="URL für ${repo.name} kopieren">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                    </svg>
                                    Copy
                                </button>
                            </div>
                        </div>
                    </article>
                `;
            }).join('');

            // Lazy Loading für Bilder aktivieren
            grid.querySelectorAll('img[data-src]').forEach(img => {
                imageObserver.observe(img);
            });

            if (!featured) {
                updateResultsCount(repos.length);
                grid.setAttribute('aria-busy', 'false');
            }
        }

        // Filtering & Sorting
        function applyFilters() {
            const searchTerm = currentFilters.search.toLowerCase();

            filteredRepos = allRepos.filter(repo => {
                // Featured Repos ausschließen für normale Liste
                if (repo.isFeatured && currentFilters.filter === 'all') return false;

                // Suchfilter
                const matchesSearch = !searchTerm ||
                    repo.name.toLowerCase().includes(searchTerm) ||
                    (repo.description || '').toLowerCase().includes(searchTerm) ||
                    (repo.topics || []).some(topic => topic.toLowerCase().includes(searchTerm));

                // Kategoriefilter
                let matchesFilter = true;
                if (currentFilters.filter.startsWith('topic:')) {
                    const topic = currentFilters.filter.replace('topic:', '');
                    matchesFilter = (repo.topics || []).some(t => t.toLowerCase() === topic);
                } else if (currentFilters.filter.startsWith('lang:')) {
                    const lang = currentFilters.filter.replace('lang:', '');
                    matchesFilter = repo.language === lang;
                } else if (currentFilters.filter === 'featured') {
                    matchesFilter = repo.isFeatured;
                }

                return matchesSearch && matchesFilter;
            });

            applySort();
        }

        function applySort() {
            const sortBy = currentFilters.sort;

            filteredRepos.sort((a, b) => {
                switch (sortBy) {
                    case 'stars':
                        return b.stargazers_count - a.stargazers_count;
                    case 'name':
                        return a.name.localeCompare(b.name);
                    case 'updated':
                    default:
                        return new Date(b.pushed_at) - new Date(a.pushed_at);
                }
            });

            renderCards(filteredRepos);
        }

        function updateResultsCount(count) {
            const formatter = new Intl.NumberFormat('de-DE');
            const totalNonFeatured = allRepos.filter(r => !r.isFeatured).length;
            document.getElementById('results-count').textContent =
                `${formatter.format(count)} von ${formatter.format(totalNonFeatured)} Repositories`;
        }

        // URL Hash Management mit search/filter/sort
        function updateHash() {
            const params = new URLSearchParams();
            if (currentFilters.search) params.set('search', currentFilters.search);
            if (currentFilters.filter !== 'all') params.set('filter', currentFilters.filter);
            if (currentFilters.sort !== 'updated') params.set('sort', currentFilters.sort);

            const hash = params.toString();
            window.location.hash = hash ? `#${hash}` : '';
        }

        function readHash() {
            const hash = window.location.hash.slice(1);
            if (!hash) return;

            const params = new URLSearchParams(hash);
            currentFilters.search = params.get('search') || '';
            currentFilters.filter = params.get('filter') || 'all';
            currentFilters.sort = params.get('sort') || 'updated';

            // UI aktualisieren
            document.getElementById('search-input').value = currentFilters.search;
            document.getElementById('sort-select').value = currentFilters.sort;

            // Filter-Button aktivieren
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.filter === currentFilters.filter);
            });
        }

        // View Persistence
        function saveViewPreference(view) {
            localStorage.setItem('timintech_view', view);
        }

        function loadViewPreference() {
            return localStorage.getItem('timintech_view') || 'comfort';
        }

        // Copy Function mit verbessertem Feedback
        function copyToClipboard(event, text) {
            navigator.clipboard.writeText(text).then(() => {
                // Visuelles ✓-Feedback
                const btn = event.target.closest('.repo-link');
                const originalHTML = btn.innerHTML;
                btn.innerHTML = btn.innerHTML.replace('Copy', '✓');
                btn.style.background = 'rgba(0, 255, 136, 0.3)';
                setTimeout(() => {
                    btn.innerHTML = originalHTML;
                    btn.style.background = '';
                }, 1000);
            }).catch(() => {
                // Fallback für ältere Browser
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
            });
        }

        function filterByTopic(topic) {
            currentFilters.filter = `topic:${topic}`;
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.filter === currentFilters.filter);
            });
            applyFilters();
            updateHash();
        }

        // Event Listeners
        function setupEventListeners() {
            // Suche mit Debouncing (300ms)
            const searchInput = document.getElementById('search-input');
            searchInput.addEventListener('input', (e) => {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    currentFilters.search = e.target.value;
                    applyFilters();
                    updateHash();
                }, 300);
            });

            // Filter
            document.getElementById('filters').addEventListener('click', (e) => {
                if (e.target.classList.contains('filter-btn')) {
                    document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
                    e.target.classList.add('active');
                    currentFilters.filter = e.target.dataset.filter;
                    applyFilters();
                    updateHash();
                }
            });

            // View Toggle
            document.querySelectorAll('.view-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
                    e.target.classList.add('active');

                    const view = e.target.dataset.view;
                    const grid = document.getElementById('repos-grid');
                    const cards = grid.querySelectorAll('.repo-card');

                    if (view === 'compact') {
                        grid.classList.add('compact');
                        cards.forEach(card => card.classList.add('compact'));
                    } else {
                        grid.classList.remove('compact');
                        cards.forEach(card => card.classList.remove('compact'));
                    }

                    saveViewPreference(view);
                });
            });

            // Sortierung
            document.getElementById('sort-select').addEventListener('change', (e) => {
                currentFilters.sort = e.target.value;
                applySort();
                updateHash();
            });

            // Keyboard Shortcuts
            document.addEventListener('keydown', (e) => {
                if (e.key === '/' && !e.ctrlKey && !e.metaKey && e.target.tagName !== 'INPUT') {
                    e.preventDefault();
                    searchInput.focus();
                } else if (e.key === 'Escape' && e.target === searchInput) {
                    searchInput.value = '';
                    currentFilters.search = '';
                    applyFilters();
                    updateHash();
                }
            });

            // Hash Changes
            window.addEventListener('hashchange', () => {
                readHash();
                applyFilters();
            });

            // Load View Preference
            const savedView = loadViewPreference();
            document.querySelectorAll('.view-btn').forEach(btn => {
                if (btn.dataset.view === savedView) {
                    btn.click();
                }
            });
        }

        // Main Function
        async function fetchRepositories() {
            try {
                document.getElementById('banners').innerHTML = '';
                activeBanners.clear();

                await rateLimitPreflight();

                const repos = await fetchUserRepos();
                allRepos = await augmentRepoDetails(repos);

                renderWidgets();
                renderFilters();

                // Featured Repos rendern
                const featuredReposData = allRepos.filter(repo => repo.isFeatured);
                renderCards(featuredReposData, 'featured-grid', true);

                readHash();
                applyFilters();

            } catch (error) {
                console.error('Error fetching repositories:', error);
                showBanner('Fehler beim Laden der Repositories. Netzwerkverbindung prüfen.', 'error');
                document.getElementById('repos-grid').innerHTML =
                    '<div class="error">Repositories konnten nicht geladen werden.</div>';
                document.getElementById('repos-grid').setAttribute('aria-busy', 'false');
                document.getElementById('widgets').setAttribute('aria-busy', 'false');
            }
        }

        // Initialization
        setupEventListeners();
        fetchRepositories();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9854b42c51cf62e5',t:'MTc1ODkxMDA3Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
